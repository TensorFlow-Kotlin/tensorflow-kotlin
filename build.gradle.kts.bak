plugins {
    // Apply the Kotlin JVM plugin to add support for Kotlin on the JVM.
    id("org.jetbrains.kotlin.jvm").version("1.3.21")
    id("c")
}

repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

dependencies {
    // Use the Kotlin JDK 8 standard library.
    implementation("org.jetbrains.kotlin:kotlin-stdlib-jdk8")

    // Use the Kotlin test library.
    testImplementation("org.jetbrains.kotlin:kotlin-test")

    // Use the Kotlin JUnit integration.
    testImplementation("org.jetbrains.kotlin:kotlin-test-junit")

    compile(files("/home/mattmoore/source/kotlin-examples/jni/libhello.so"))
}

tasks {
  test {
    // systemProperty("java.library.path", "/home/mattmoore/source/kotlin-examples/jni/libhello.so")
    systemProperty("java.library.path", file("${buildDir}/libs/hello/shared").absolutePath)
  }

  model {
    components {
      hello(NativeExecutableSpec)
    }
  }
}

test.dependsOn("helloSharedLibrary")
